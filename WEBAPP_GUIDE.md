# OpenCV Webアプリケーション 使用ガイド

## 🎉 Webアプリが完成しました！

OpenCVの機能をブラウザから簡単に利用できるWebアプリケーションが作成されました。

## 📁 ファイル構成

```
webapp/
├── app.py                 # メインのFlaskアプリケーション
├── run_webapp.py          # 起動スクリプト
├── templates/
│   ├── index.html         # メインページ
│   └── demo.html          # デモページ
├── static/
│   ├── css/
│   │   └── style.css      # スタイルシート
│   ├── js/
│   │   └── main.js        # JavaScript
│   ├── uploads/           # アップロード画像
│   └── results/           # 処理結果画像
```

## 🚀 起動方法

### 方法1: 自動起動スクリプト使用（推奨）
```bash
cd /home/opencv-ml-project/webapp
python3 run_webapp.py
```

### 方法2: 手動起動
```bash
cd /home/opencv-ml-project
source venv/bin/activate
cd webapp
python app.py
```

## 🌐 アクセス方法

Webアプリが起動したら、ブラウザで以下のURLにアクセス：

- **メインページ**: http://localhost:5000
- **デモページ**: http://localhost:5000/demo

## ✨ 利用可能な機能

### 1. 👤 顔検出
- 画像内の顔と目を自動検出
- Haar Cascade分類器を使用
- 検出された部分に矩形を表示
- 検出数をカウント表示

### 2. 🔍 物体検出
- 輪郭ベースの物体検出
- 形状の自動分類（三角形、四角形、円など）
- 面積による フィルタリング
- 色分けされた矩形で表示

### 3. 📐 エッジ検出
- Cannyエッジ検出アルゴリズム
- ノイズ除去処理
- 輪郭の明確化
- モノクロエッジ画像を生成

## 🎯 使用方法

### 画像アップロード
1. **ドラッグ&ドロップ**: 画像をアップロードエリアにドラッグ
2. **クリック選択**: アップロードエリアをクリックしてファイル選択
3. **対応形式**: JPG, PNG, GIF, BMP (最大16MB)

### 処理実行
1. 画像アップロード後、処理ボタンが有効化
2. 「顔検出」「物体検出」「エッジ検出」から選択
3. 処理結果が自動で表示

### デモ機能
1. **顔検出デモ**: 人工的な顔画像で顔検出をテスト
2. **図形検出デモ**: 幾何学図形で物体検出をテスト
3. ワンクリックで結果を確認可能

## 🛠️ 技術仕様

### バックエンド
- **Flask**: Webフレームワーク
- **OpenCV**: 画像処理ライブラリ
- **NumPy**: 数値計算
- **Pillow**: 画像操作

### フロントエンド
- **HTML5**: 構造
- **CSS3**: スタイリング（グラデーション、アニメーション）
- **JavaScript**: インタラクション
- **レスポンシブデザイン**: モバイル対応

### 処理機能
- **リアルタイム処理**: 画像アップロード後即座に処理
- **結果保存**: 処理結果画像の自動保存
- **エラーハンドリング**: 適切なエラーメッセージ表示

## 📊 動作確認済み機能

✅ **画像アップロード**: ドラッグ&ドロップ、ファイル選択  
✅ **顔検出処理**: 顔と目の検出、矩形表示  
✅ **物体検出処理**: 形状分類、輪郭検出  
✅ **エッジ検出処理**: Cannyエッジ検出  
✅ **デモ機能**: サンプル画像自動生成  
✅ **レスポンシブ**: モバイル・タブレット対応  
✅ **エラーハンドリング**: ファイル形式、サイズチェック  

## 🔧 カスタマイズ

### 処理パラメータの調整
`app.py`の`WebOpenCVProcessor`クラスで各処理のパラメータを調整可能：

```python
# 顔検出の感度調整
faces = self.face_cascade.detectMultiScale(gray, 1.3, 5)

# 物体検出の最小面積変更
min_area = 1000

# エッジ検出の閾値変更
edges = cv2.Canny(gray, 50, 150)
```

### デザインのカスタマイズ
`static/css/style.css`でスタイルを変更可能：
- 色テーマの変更
- アニメーション効果の調整
- レイアウトの変更

## ⚠️ 注意事項

1. **ファイルサイズ制限**: 16MB以下
2. **対応形式**: JPG, PNG, GIF, BMPのみ
3. **開発サーバー**: 本番環境では適切なWSGIサーバーを使用
4. **プライバシー**: アップロードされた画像は一時的にサーバーに保存

## 🎊 完成！

これで、OpenCVの機能を誰でも簡単にブラウザから利用できるWebアプリケーションが完成しました！

**起動コマンド**: `python3 run_webapp.py`  
**アクセスURL**: http://localhost:5000